{% extends 'cbtsystem/index.html' %}

{% block content %}

<div class="container">

    <h5 id="testName" class="text-center text-warning">SAT: </h5>
    <br>
    <div class="d-flex justify-content-start   pe-4 mb-3">
        <h3>
            <span class="text-light" >Reading Section Directions:  &nbsp;
            </span>
        </h3>

    </div>
    <div class="ms-3">
        <li>Mobile phones, smartwatches, fitness trackers, or other wearable technology (simple nondigital watches are
            acceptable)
        </li>
        <li>Separate timers of any type</li>
        <li>Cameras or any other photographic equipment</li>
        <li>Unacceptable calculators that have QWERTY (computer-like) keypads, use paper tape, make noise, or use a
            power cord
        </li>
        <li>Mobile phones, smartwatches, fitness trackers, or other wearable technology (simple nondigital watches are
            acceptable)
        </li>
        <li>Separate timers of any type</li>
        <li>Cameras or any other photographic equipment</li>
        <li>Unacceptable calculators that have QWERTY (computer-like) keypads, use paper tape, make noise, or use a
            power cord
        </li>
    </div>

    <div class="text-center py-5" id="linkDiv">

        <a href="{% url 'demo' %}" class="btn btn-secondary btn-lg d-none" id="startBtn">Start Section <i
                class="bi bi-arrow-right-circle"></i></a>
    </div>

    <hr>

    <div id="jsData"></div>


    <script>

var selectedTest = localStorage.getItem("selectedTest")
var selectedTestId = localStorage.getItem("selectedTestId")
        function myTest() {
  document.getElementById("testName").innerHTML = `SAT: ${selectedTest} - ${selectedTestId}`
}

myTest()




    </script>
    <script>
var apiList = [];
var studentApi = "";

const user_id = JSON.parse(document.getElementById("user_id").textContent);


function getPending() {
  fetch("http://127.0.0.1:8000/pendingapi")
    .then((resp) => resp.json())
    .then(function (data) {
      apiList = data;

      for (i in apiList) {
        if (apiList[i].studentId == user_id) {
          studentApi = apiList[i];
          break
        }
      }
    })
    .then(function () {
      console.log("studentApi", studentApi);

      document.getElementById("jsData").innerHTML =
       `Reading: ${studentApi.studentAnswersReading}  / timeLeftReading: ${studentApi.timeLeftReading} <br>

       Writing: ${studentApi.studentAnswersWriting} / timeLeftReading: ${studentApi.timeLeftWriting} <br>

       studentApi.testName:  ${studentApi.testName}`;



      if (studentApi.testId === selectedTestId) {

        localStorage.setItem("readingApi", studentApi.studentAnswersReading);
        localStorage.setItem("readingApiTime", studentApi.timeLeftReading);

        localStorage.setItem("writingApi", studentApi.studentAnswersWriting);
        localStorage.setItem("writingApiTime", studentApi.timeLeftWriting);

        document.getElementById("startBtn").classList.remove("d-none", "btn-secondary");
        document.getElementById("startBtn").classList.add("btn-outline-warning");

        var goTest = ` <a href="http://127.0.0.1:8000/demo/${studentApi.testId}  " class="btn btn-warning btn-lg " id="startBtn">Start Section <i
                class="bi bi-arrow-right-circle"></i></a>`

        document.getElementById("linkDiv").innerHTML = goTest



      } else {


        localStorage.removeItem("readingApi");
        localStorage.removeItem("readingApiTime");

        localStorage.removeItem("writingApi");
        localStorage.removeItem("writingApiTime");


              document.getElementById("startBtn").classList.remove("d-none");

      }


    });
}

getPending();


    </script>

</div>


{% endblock %}